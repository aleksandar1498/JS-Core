<script>
//rado3000
class Computer {
   constructor (ramMemory,cpuGHz,hddMemory){
	this.ramMemory = ramMemory;
	this.cpuGHz = cpuGHz;
	this.hddMemory = hddMemory;
	this.taskManager = [];
	this.installedPrograms = [];
   }
   
   installAProgram(name, requiredSpace){
	   if(requiredSpace > this.hddMemory){
			return "There is not enough space on the hard drive";
	   }
	   let program = {
			name : name,
			requiredSpace : requiredSpace
	   }
	   this.decreaseHddMemory(requiredSpace);
	   this.installedPrograms.push(program);
	   return program;
   }
   uninstallAProgram(name){
	   
	   if(this.isInstalled(name) == false){
		   return "Control panel is not responding";
	   }
	   for(let i=0;i< this.installedPrograms.length;i++){
		   if(this.installedPrograms[i]['name'] == name){
			   this.increaseHddMemory(this.installedPrograms[i]['requiredSpace']);
			   this.installedPrograms.splice(i,1);
			   break;
		   }
	   }
	   return this.installedPrograms;
   }
  
   
   
   openAProgram(name){
   console.log(name);
		if(this.isInstalled(name) == false){
		   return `The ${name} is not recognized`;
		}
		console.log(name);
		if(this.isOpened(name)){
			return `The ${name} is already open`;
		}
		console.log(name);
		let program = this.installedPrograms.find(p => p['name'] == name);
		console.log(program);
		let ramUsage = (program['requiredSpace'] / this.ramMemory) * 1.5;
		let cpuUsage = ((program['requiredSpace'] / this.cpuGHz)/500) * 1.5;
		let programOpened = {
			name : name,
			ramUsage : ramUsage,
			cpuUsage : cpuUsage,
		}
		console.log(name);
		
		this.taskManager.push(programOpened);
		if(this.totMemoryUsage() >= 100){
		 return `${name} caused out of memory exception`;
		}
		if(this.totCpuUsage() >= 100){
			return `${name} caused out of cpu exception`;
		}
		return programOpened;
   }
   
   taskManagerView(){
	if(this.taskManager.length == 0){
		return "All running smooth so far";
	}
	let result = '';
	for(const program of this.taskManager){
		result+=`\nName - ${program['name']} | Usage - CPU: ${program['cpuUsage']}%, RAM: ${program['ramUsage']}%`
	}
	return result;
   }
   decreaseHddMemory(neededMemory){
	   this.hddMemory-=neededMemory;
   }
   increaseHddMemory(neededMemory){
	   this.hddMemory+=neededMemory;
   }
   isInstalled(program){
    return (this.installedPrograms.find(p => p['name'] == program))?true:false;
   }
   isOpened(program){
	return (this.installedPrograms.find(p => p['name'] == program))?true:false;
   }
   totMemoryUsage(){
	return this.taskManager.reduce((a,c) => a+c['ramUsage'],0);
   }
   totCpuUsage(){
	return this.taskManager.reduce((a,c) => a+c['cpuUsage'],0);
   }
}

let computer = new Computer(4096, 7.5, 250000);

// act
computer.installAProgram('Word', 7300);
computer.installAProgram('Excel', 10240);
computer.installAProgram('PowerPoint', 12288);
computer.uninstallAProgram('Word');
computer.installAProgram('Solitare', 1500);

computer.openAProgram('Excel');
computer.openAProgram('Solitare');
console.log(computer.taskManager);
</script>