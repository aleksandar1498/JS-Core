<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>FromJSONToHTMLTable</title>
    <style>
        table,
        th {
            border: groove;
            border-collapse: collapse;
        }

        td {
            border: 1px solid black;
        }

        td,
        th {
            padding: 5px;
        }
    </style>
</head>

<body>
    <div id="wrapper">
    </div>
    <script>
        function lowestPricePerProduct(cities) {
           let products = {};
		   for(let city of cities){
			city = city.split(/ \| /g);
			let cityName = city[0];
			let product = city[1];
			let price = Number(city[2]);
			if(products[product]){
				if(products[product][cityName]){
					products[product][cityName]["price"] = price;
				}else{
					products[product][cityName]= {};
					products[product][cityName]["price"] = price;
				}
			}else{
				products[product] = {};
				products[product][cityName]= {};
				products[product][cityName]["price"] = price;
			}
		   }
		   
		   const productNames = Object.keys(products);
		   for(const key of productNames){
			let cheaperCity = Object.entries(products[key]).sort((a,b) => {
				//console.log(a[1]['price'],b[1]['price'])
				return a[1]['price'] - b[1]['price'];
			})[0];
			
			console.log(`${key} -> ${cheaperCity[1]["price"]} (${cheaperCity[0]})`);
			
			
		   }
		   

        }
        lowestPricePerProduct([
			'Sofia City | Audi | 100000',
			'Sofia City | BMW | 100000',
			'Sofia City | Mitsubishi | 10000',
			'Sofia City | Mercedes | 10000',
			'Sofia City | NoOffenseToCarLovers | 0',
			'Mexico City | Audi | 1000',
			'Mexico City | BMW | 99999',
			'New York City | Mitsubishi | 10000',
			'New York City | Mitsubishi | 1000',
			'Mexico City | Audi | 100000',
			'Washington City | Mercedes | 1000'
		]
);
    </script>
</body>

</html>